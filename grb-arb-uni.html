<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/css/bootstrap-select.min.css" integrity="sha512-mR/b5Y7FRsKqrYZou7uysnOdCIJib/7r5QeJMFvLNHNhtye3xJp1TdJVPLtetkukFn227nKpXD9OjUc09lx97Q==" crossorigin="anonymous"
        referrerpolicy="no-referrer" />
    <link rel="shortcut icon" href="./assets/images/garbi_favicon.png" type="image/x-icon">
    <link href="./assets/css/style.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/big-integer/1.6.48/BigInteger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="./assets/js/web3.min.js"></script>
    <script src="./assets/js/trustwallet.js"></script>
    <script src="./js/contract/arbitrum/abi.js"></script>
    <script src="./js/contract/arbitrum/config.js"></script>
    <script src="./js/data/store.js"></script>
    <script src="./js/contract/arbitrum/core.js"></script>
    <script src="./js/contract/arbitrum/base.contract.js"></script>
    <script src="./js/contract/arbitrum/data.js"></script>
    <script src="./js/contract/arbitrum/garbi.farm.contract.js"></script>

    <title>GRB-ARB Uniswap V3 Vault - Garbi Protocol</title>
    <style id="svelte-166mr51-style">
        ul.svelte-166mr51 {
            display: flex;
            flex-flow: column nowrap;
            position: fixed;
            font-size: 16px;
            padding: 0 0.75em;
            margin: 0;
            list-style-type: none;
            width: 20em;
            bottom: 0;
            right: 0;
            font-family: 'Helvetica Neue';
            max-height: 100vh;
            overflow-y: scroll;
            overflow-x: hidden;
            color: #4a4a4a;
            background: transparent;
            scrollbar-width: none;
            box-sizing: border-box;
            height: 100vh;
            pointer-events: none;
            z-index: 99999999
        }
        @media only screen and (max-width: 450px) {
            ul.svelte-166mr51 {
                width: 100%
            }
        }
        
        .bn-notify-custom.bn-notify-dark-mode {
            background: #283944;
            color: #ffffff;
            background: rgba(40, 57, 68, 0.9)
        }
        
        .bn-notify-clickable:hover {
            cursor: pointer
        }
        
        .svelte-166mr51::-webkit-scrollbar {
            display: none
        }
        
        li.svelte-166mr51 {
            position: relative;
            display: flex;
            padding: 0.75em;
            font-size: 0.889em;
            font-family: inherit;
            border-radius: 10px;
            background: #ffffff;
            box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);
            color: inherit;
            transition: background 300ms ease-in-out, color 300ms ease-in-out;
            pointer-events: all;
            background: #ffffff;
            backdrop-filter: blur(5px);
            background: rgba(255, 255, 255, 0.9)
        }
        
        div.svelte-166mr51 {
            position: absolute;
            top: 0.75em;
            right: 0.75em;
            font-size: inherit;
            font-family: inherit
        }
    </style>
    <style id="svelte-7rn0pv-style">
        div.svelte-7rn0pv {
            height: 100%;
            font-size: inherit;
            font-family: inherit;
            width: 1.5em
        }
    </style>
    <style id="svelte-5f7pqk-style">
        div.svelte-5f7pqk {
            display: flex;
            flex-flow: column nowrap;
            justify-content: center;
            font-size: inherit;
            font-family: inherit;
            margin-left: 0.75em;
            width: 90%
        }
        
        p.svelte-5f7pqk {
            display: flex;
            align-items: center;
            margin: 0.5em 0 0 0;
            opacity: 0.7;
            font-size: 0.889em;
            line-height: 1.15;
            font-family: inherit
        }
        
        span.svelte-5f7pqk {
            font-family: inherit;
            display: flex;
            align-items: center
        }
    </style>
    <style id="svelte-12gqi36-style">
        p.svelte-12gqi36 {
            margin: 0;
            font-family: inherit;
            font-size: inherit
        }
    </style>
    <style id="svelte-1ociadw-style">
        svg.svelte-1ociadw {
            margin: 0 0.25em 0 0.5em
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <header class="header" id="header">
            <div class="alert-banner" style="background: rgb(45, 66, 252)">
                <div class="message">Please note that Garbi Protocol is currently only supported on the Arbitrum One network. To use Garbi Protocol, switch to a network that supports it.</div>
            </div>
            <nav class="navbar navbar-expand-lg">
                <div class="container container-1">
                    <div class="row flex-grow-1 align-items-center">
                        <div class="col-6 col-lg-2">
                            <div class="d-flex align-items-center">
                                <button class="navbar-toggler mr-3" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-header">
                                    <i class="fas fa-bars"></i>
                                </button>
                                <div class="logo" onclick="window.location='index.html'">
                                    <img src="./assets/images/garbi.png" />
                                </div>
                            </div>
                        </div>
                        <div class="col-6 col-lg-2 order-lg-3">
                            <div class="d-flex align-items-center justify-content-end">
                                <span class="wrap-user-acct">0x0</span>
                                <a href="#" class="header__btn-connect btn-connect-wallet wrap-btn-connect">Connect your wallet</a>
                                <span class="dropMenu">
                                    <button type="button" class="header__btn-swap ms-3 ctmenu-item"><i class="fas fa-ellipsis-h"></i></button>
                                    <div class="ctmenu-sub  swap-box">
                                        <a class="f-roboto f-400" href="dashboard.html">Dashboard</a>
                                    </div>
                                </span>
                            </div>
                        </div>
                        <div class="col-lg-8">
                            <div class="collapse navbar-collapse" id="navbar-header">
                                <ul class="navbar-nav menu-header-swap mx-auto mb-2 mb-lg-0 align-items-lg-center">
                                        <li>
                                            <a class="nav-link" href="swap.html">Swap</a>
                                        </li>
                                        <li class="nav-item dropdown">
                                            <a class="nav-link dropdown-toggle" href="#" id="earnDropdownMore" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                Earn 
                                            </a>
                                            <ul class="dropdown-menu" aria-labelledby="earnDropdownMore">
                                                <li>
                                                    <a class="dropdown-item" href="nft-lp-earn.html">NFT-LP Earn</a>
                                                </li>
                                                <li>
                                                    <a class="dropdown-item" href="earn.html">Classic Earn</a>
                                                </li>
                                            </ul>   
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="equity-cert-exchange.html">GEC Exchange</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="vest.html">Vest veGRB to GRB</a>
                                        </li>
                                        <li class="nav-item dropdown">
                                          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMore" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                            GRB-ARB Liquidity
                                          </a>
                                            <ul class="dropdown-menu" aria-labelledby="navbarDropdownMore">
                                                <li>
                                                    <a class="dropdown-item" href="https://app.uniswap.org/#/add/0x5Fd71280b6385157b291b9962f22153FC9E79000/ARB/3000?minPrice=0.0001&maxPrice=0.001" target="_blank">Uniswap V3</a>
                                                </li>
                                                <li>
                                                    <a class="dropdown-item" href="deposit.html">GarbiSwap</a>
                                                </li>
                                            </ul>                                
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="v1/index.html">V1</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="no-loss-lottery.html">Lottery</a>
                                        </li>
                                        <!-- <li class="nav-item">
                                            <a class="nav-link" href="deposit.html">Deposit</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="withdraw.html">Withdraw</a>
                                        </li> -->
                                        
                                    </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
        </header>
        <main class="page__swap grb-farm-2">
            <section class="container">
                <div class="row">
                    <div class="col-lg-5 order-lg-last" style="margin-top:8px;">
                        <article class="garbi__box-1 p-3 mb-3">
                            <p class="f-700">NFT-LP Earn</p>

                            <p>Welcome to our veGRB generation page using Uniswap V3 NFT-LP. Here, you can earn veGRB by providing liquidity to the GRB/ARB pool on Uniswap V3 using NFT-LP, a unique non-fungible token that represents your liquidity position in the pool.</p>

                            <p>To get started, follow these steps:</p>

                            <p>1. Visit <a href="https://app.uniswap.org/#/add/0x5Fd71280b6385157b291b9962f22153FC9E79000/0x912CE59144191C1204E64559FE8253a0e49E6548/3000?minPrice=0.01&maxPrice=19" style="font-weight: bold; text-decoration: underline;word-break: break-all;" target="_blank">https://app.uniswap.org/#/add/0x5Fd71280b6385157b291b9962f22153FC9E79000/0x912CE59144191C1204E64559FE8253a0e49E6548/3000?minPrice=0.01&maxPrice=19</a> to add liquidity to the GRB/ARB pool and receive your NFT-LP.</p>

                            <p>2. If you have more than one NFT-LP token for GRB/ARB (positions), you will need to migrate them into a single NFT-LP token. This is because our smart contract only allows for one NFT-LP token to be used for generating veGRB.</p>

                            <p>3. Click the "Deposit NFT-LP, Earn veGRB" button to start earning veGRB with your NFT-LP.</p>

                            <p>4. To exit the earning and withdraw your NFT-LP and veGRB rewards, click the "Exit Vault" button and follow the prompts.</p>

                            <p>Please note that the price range of your NFT-LP should fall within the range specified by the vault.</p>

                            <p>For more information about how NFT-LP works, please head to Uniswap V3.</p>

                        </article>
                    </div>
                    <div class="col-lg-7 order-lg-first">
                        <div class="masthead">
                            <div class="masthead__values header-display ">
                                <div class="masthead__balance-value">
                                    <h4 class="L0 heading heading--emphasized">
                                        <span class="toggle-icon-wrapper">
                                            <div class="icon icon--centered undefined">
                                                <div class="token-1">GRB</div><div class="token-2">ARB</div>
                                            </div>
                                        </span>
                                        <p><span class="gec-price">GRB / ARB</span></p>
                                        <div class="" style="margin-left: 10px;">
                                            <div class="percent-volume"><span>0.3%</span></div>
                                        </div>
                                        <div class="notice-range" style = "display:none">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                                            </svg>
                                            &nbsp;
                                            <div class="">Out of range</div>
                                        </div>
                                    </h4>
                                </div>
                            </div>
                            <div class="masthead__action-buttons">
                                <div class="masthead__action-buttons">
                                    <button class="button button--large button--buy button-deposit-nft">
                                        <label class="label">Deposit NFT-LP, Earn veGRB</label>
                                    </button>
                                    <button class="button button--large button--sell button-withdraw">
                                        <label class="label">Exit Vault</label>
                                    </button>
                                    <!-- Modal -->
                                    <div class="modal fade" id="token-increase" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                      <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                          <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Deposit your NFT-LP</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">X</button>
                                          </div>
                                          <div class="modal-body">
                                            <div class="img">
                                                <img src="../assets/images/uniswap-default.png" class="image-token" >
                                            </div>
                                            <div class="description">
                                                <p>Initiate earnings of veGRB by depositing your Uniswap V3 NFT-LP into the Garbi Protocol.</p>
                                            </div>
                                          </div>
                                          <div class="modal-footer">
                                            <button type="button" class="btn btn-primary btn-approve" style="display: none; margin-bottom: 1rem">Approve</button>
                                            <button type="button" class="btn btn-primary btn-deposit">Deposit</button>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <article class="swap__main garbi__box-1 p-3 mb-3 nft-quantity-check" style="background: rgb(45, 66, 252);display:none;">
                            <div class="d-flex align-items-center justify-content-between mb-11">
                                <div class="f-700 mt-3">
                                    <fieldset>
                                        <p>Please be advised that our contract only allows one NFT-LP for earning on the GRB/ARB pair. As you currently possess <span class="nft-quantity">0</span> NFT-LPs for this pair, kindly consolidate all your NFT-LP positions into a single Uniswap NFT-LP for GRB/ARB to use our contract.</p>
                                    </fieldset>
                                </div>
                            </div>
                        </article>
                        <div class="row">
                            <div class="col-lg-4 col-sm-12">
                                <div class="image">
                                    <img src="../assets/images/nft-deposited.png" class="nft-deposited-check" style="display:none;">
                                    <img src="../assets/images/uniswap-default.png" class="image-token">
                                </div>
                            </div>
                            <div class="col-lg-8 col-sm-12">
                                <article class="liquidity-form garbi__box-1 p-3 mb-3">
                                    <div class="d-flex align-items-center justify-content-between mb-12">
                                        <div class="f-700">
                                            <span>Your NFT-LP Liquidity</span>
                                        </div> 
                                        <div class="f-700">
                                            <span class="status-in-wallet" style="display: none">Status: In Wallet</span>
                                            <span class="status-in-earning" style="display: none">Status: In Earning</span>
                                        </div>                             
                                    </div>
                                    <div class="volume">$<span class="liquidity-volume">0</span></div>
                                    <div class="form-item swap__form-item">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="" style="margin-bottom: 12px;">                                         
                                                    <div class="" style="display: flex;align-items: center;">
                                                        <div class="logo-token" style="margin-right: 0.5rem;">
                                                            <img class="" src="../assets/images/grb_token.png">
                                                        </div>
                                                        <div class="">GRB</div>
                                                    </div>
                                                </div>
                                                <div class="" style="display: flex;align-items: center;">
                                                    <div class="logo-token" style="margin-right: 0.5rem;">
                                                        <img class="" src="../assets/images/arb.png">
                                                    </div>                                        
                                                    <span class="">ARB</span>
                                                </div>
                                            </div>
                                            <div class="col-6" style=" text-align: right;position: relative;">
                                                <div class="text-end" style="display: flex;justify-content: right;align-items:center;margin-bottom: 12px;">                                         
                                                    <span class="user-token-0-amount">0</span>
                                                </div>
                                                <div class="text-end" style="display: flex;justify-content: right;align-items:center;">                                         
                                                    <span class="user-token-1-amount">0</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </article>
                                <article class="liquidity-form garbi__box-1 p-3 mb-3">
                                    <div class="d-flex align-items-center justify-content-between mb-12">
                                        <div class="f-700">
                                            <span>Earned</span>
                                        </div>
                                        <button width="fit-content" class="button button--large button--buy harvest-button">
                                            <label class="label">Harvest</label>
                                        </button>                          
                                    </div>
                                    <div class="volume">$<span class="earn-volume">0.0</span></div>
                                    <div class="form-item swap__form-item">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="">                                         
                                                    <div class="" style="display: flex;align-items: center;margin-bottom: 12px;">
                                                        <div class="logo-token" style="margin-right: 0.5rem;">
                                                            <img class="" src="../assets/images/grb_token.png">
                                                        </div>
                                                        <div class="">veGRB</div>
                                                    </div>
                                                </div>
                                                <div class="" style="display: flex;align-items: center;">
                                                    <div class="logo-token" style="margin-right: 0.5rem;">
                                                        <div class="token-1" style="--size: 40px;">%</div>
                                                    </div>                                   
                                                    <span class="">APR</span>
                                                </div>
                                            </div>
                                            <div class="col-6" style=" text-align: right;position: relative;">
                                                <div class="text-end" style="display: flex;justify-content: right;align-items:center;margin-bottom: 12px;">                                         
                                                    <span class="user-earn-token">0</span>
                                                </div>
                                                <div class="text-end" style="display: flex;justify-content: right;align-items:center;">                                         
                                                    <span class="apr">0</span>%
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </article>
                            </div>
                        </div>
                            
                        <article class="price-range swap__main garbi__box-1 p-3 mb-3">
                            <div class="d-flex align-items-center justify-content-between mb-14">
                                <div class="f-700">
                                    <span>Vault Information</span>
                                </div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between mb-14">
                                <div class="title">
                                    <span>Total asset value secured: $<span class="total-asset-value">0</span></span>
                                </div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between mb-14">
                                <div class="title">
                                    <span>Price range of your NFT-LP:</span>
                                </div>
                            </div>
                            <div class="min-and-max mb-14">
                                <div class="row">
                                    <div class="col-lg-5">
                                        <div class="form-item swap__form-item min-price-nft">
                                            <div class="">
                                                <span class="">Min price</span>
                                                <div class="price"><span class="price-nft">0.0</span>($<span class="value-nft">0</span>)</div>
                                                <span class="description"> ARB per GRB</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2" style="display: flex;align-items: center;justify-content: center;font-size: 30px;">
                                        <span class="">⟷</span>
                                    </div>
                                    <div class="col-lg-5">
                                        <div class="form-item swap__form-item max-price-nft">
                                            <div class="">
                                                <span class="">Max price</span>
                                                <div class="price"><span class="price-nft">0.0</span>($<span class="value-nft">0</span>)</div>
                                                <span class="description"> ARB per GRB</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>        
                            </div>
                            <div class="d-flex align-items-center justify-content-between mb-14">
                                <div class="title">
                                    <span>Price range of vault:</span>
                                    <div class="notice-range" style="display:none">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <line x1="12" y1="8" x2="12" y2="12"></line>
                                            <line x1="12" y1="16" x2="12.01" y2="16"></line>
                                        </svg>
                                        &nbsp;
                                        <div class="">Out of range</div>
                                    </div>
                                </div>
                            </div>
                            <div class="min-and-max">
                                <div class="row">
                                    <div class="col-lg-5">
                                        <div class="form-item swap__form-item min-price">
                                            <div class="">
                                                <span class="">Min price</span>
                                                <div class="price">0.01 ($0.017)</div>
                                                <span class="description"> ARB per GRB</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2" style="display: flex;align-items: center;justify-content: center;font-size: 30px;">
                                        <span class="">⟷</span>
                                    </div>
                                    <div class="col-lg-5">
                                        <div class="form-item swap__form-item max-price">
                                            <div class="">
                                                <span class="">Max price</span>
                                                <div class="price">19 ($17)</div>
                                                <span class="description"> ARB per GRB</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                         <div class="form-item swap__form-item current-price">
                                            <div class="">
                                                <span class="">Current price</span>
                                                <div class="price"><span class="current-grb-price">0.0</span> ($<span class="current-grb-price-usd">0.0</span>)</div>
                                                <span class="description"> ARB per GRB</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>        
                            </div>
                        </article>
                    </div>
                </div>
            </section>
        </main>

        <footer class="footer">
                <nav class="navbar navbar-expand-lg">
                    <div class="container container-1">
                        <div class="row flex-grow-1 align-items-center">
                            <div class="col-lg-4">
                                <div class="d-flex align-items-center justify-content-between">
                                    <div>© 2023 Garbi Protocol</div>
                                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-footer">
                                        <i class="fas fa-bars"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="col-lg-8">
                                <div class="collapse navbar-collapse" id="navbar-footer">
                                    <ul class="navbar-nav menu-footer ms-auto mb-2 mb-lg-0">
                                        <li class="nav-item">
                                            <a class="nav-link" href="risks.html" class="">Risks</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" target="_blank" href="https://garbi-protocol.gitbook.io/docs/">Docs</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" target="_blank" href="https://twitter.com/garbi_protocol/" rel="noopener noreferrer">#Twitter</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" target="_blank" href="https://t.me/garbiprotocol" rel="noopener noreferrer">@Telegram</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" target="_blank" href="https://github.com/garbiprotocol">git@</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#">Version 2.0.2</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </nav>
            </footer>
    </div>
    <ul id="confirm-popup" class="bn-notify-custom bn-notify-notifications svelte-166mr51" style="display:none;top: 0; justify-content: unset;">
        <li style="margin: 0.75rem 0px 0px;" class="bn-notify-custom bn-notify-notification svelte-166mr51">
            <div class="bn-notify-custom bn-notify-notification-info svelte-5f7pqk">
                <p class="bn-notify-custom bn-notify-notification-info-message svelte-12gqi36">Your <a href="" target="_blank" class="transaction-hash">transaction</a> is sent to the Blockchain.</p>
            </div>
            <div class="bn-notify-custom bn-notify-notification-close svelte-166mr51" onclick="$('#confirm-popup').hide()">
                <div class="bn-notify-custom bn-notify-notification-close-icon svelte-r8gx3p">
                    <svg height="8" viewBox="0 0 12 12" width="8" xmlns="http://www.w3.org/2000/svg">
                        <g fill="none" stroke="#9B9B9B" stroke-linecap="square" stroke-width="2" transform="translate(2 2)" style="transition: stroke 150ms ease-in-out 0s;">
                        <path d="m.1.1 7.82304289 7.82304289"></path>
                        <path d="m.1.1 7.82304289 7.82304289" transform="matrix(-1 0 0 1 8 0)"></path>
                        </g>
                        </svg>
                </div>
            </div>
        </li>
    </ul>
    <ul id="success-confirm-popup" class="bn-notify-custom bn-notify-notifications svelte-166mr51" style="display:none; top: 0; justify-content: unset;">
        <li style="margin: 0.75rem 0px 0px;" class="bn-notify-custom bn-notify-notification svelte-166mr51">
            <div class="bn-notify-custom bn-notify-notification-info svelte-5f7pqk">
                <p class="bn-notify-custom bn-notify-notification-info-message svelte-12gqi36">Your <a href="" target="_blank" class="transaction-hash">transaction</a> is confirmed.</p>
            </div>
            <div class="bn-notify-custom bn-notify-notification-close svelte-166mr51" onclick="$('#success-confirm-popup').hide()">
                <div class="bn-notify-custom bn-notify-notification-close-icon svelte-r8gx3p">
                    <svg height="8" viewBox="0 0 12 12" width="8" xmlns="http://www.w3.org/2000/svg">
                        <g fill="none" stroke="#9B9B9B" stroke-linecap="square" stroke-width="2" transform="translate(2 2)" style="transition: stroke 150ms ease-in-out 0s;">
                        <path d="m.1.1 7.82304289 7.82304289"></path>
                        <path d="m.1.1 7.82304289 7.82304289" transform="matrix(-1 0 0 1 8 0)"></path>
                        </g>
                        </svg>
                </div>
            </div>
        </li>
    </ul>
    <script src="./assets/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/js/bootstrap-select.min.js" integrity="sha512-FHZVRMUW9FsXobt+ONiix6Z0tIkxvQfxtCSirkKc5Sb4TKHmqq1dZa8DphF0XqKb3ldLu/wgMa8mT6uXiLlRlw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="./assets/js/custom.js"></script>
    <script src="./assets/js/custom.menu.js"></script>

</body>
<script>
    var abiHelper = new $.ABI();
    var coreHelper = new $.Core();
    var configHelper = new $.CONFIG();
    var contractBaseHelper = new $.CONTRACTBASE();
    var storeHelper = new $.STORE();
    var dataHelper = new $.DATA();
    var garbiFarmHelper = new $.GARBI_FARM();
    var pid = 14;
    var chainId = 42161;
    $('.alert-banner').hide();
        if (typeof window.ethereum !== 'undefined') {
          const web3 = new Web3(window.ethereum);
          window.ethereum.enable();
          web3.eth.getChainId()
            .then(chainId => {
              if (chainId !== 42161) {
                $('.alert-banner').show();
              }
              else {
                $('.alert-banner').hide();
              }
            })
            .catch(error => {
              console.error(error);
            });
        } else {
          console.log("Metamask not found");
        }
    $(document).ready(function() {
        abiHelper.init({});
        coreHelper.init({});
        configHelper.init({});
        storeHelper.init({});
        contractBaseHelper.init({
            "chainId": chainId
        });
        dataHelper.init({
            "chainId": chainId
        });
        let NonfungiblePositionManagerABI = abiHelper.getNonfungiblePositionManagerABI();         
        let NonfungiblePositionManagerContract = contractBaseHelper.getReadContract(configHelper.getContractAddressByName(chainId, 'NonfungiblePositionManager'), NonfungiblePositionManagerABI);
        let GarbiFarmUniV3ABI = abiHelper.getGarbiFarmUniV3ABI();
        let userWallet = coreHelper.getUserAccount();
        let GarbiFarmUniV3Contract = contractBaseHelper.getReadContract(configHelper.getContractAddressByName(chainId, 'GarbiFarmUniV3ForARB'), GarbiFarmUniV3ABI);
        var userTokenId = 0;
        let grbPrice = configHelper.getPriceByTokenName(chainId, 'grb');
        let arbPrice = configHelper.getPriceByTokenName(chainId, 'arb');
        let Token0Decimal = configHelper.getTokenDecimalByTokenName(chainId, 'grb');
        let Token1Decimal = configHelper.getTokenDecimalByTokenName(chainId, 'arb');   
        $.get("https://api.coingecko.com/api/v3/simple/price?ids=garbi-protocol,ethereum,arbitrum&vs_currencies=usd", function(data) {
            grbPrice = data["garbi-protocol"]["usd"];
            arbPrice = data["arbitrum"]["usd"];
        });
        function calculatePrice(tick) {
          return Math.pow(1.0001, tick);
        }
        function convertSqrtPriceX96ToPrice(sqrtPriceX96) {
          const price = (sqrtPriceX96**2)/ (2 ** 192);
          return price;
        }
        GarbiFarmUniV3Contract.methods.getData(userWallet).call()
        .then(function (result) {
            let CurrentPriceData = result.currentPrice;
            let CurrentPrice = convertSqrtPriceX96ToPrice(CurrentPriceData);
            $('.current-grb-price').text(CurrentPrice.toFixed(6));
            $('.current-grb-price-usd').text((CurrentPrice*arbPrice).toFixed(2));
            let Token0Balance = result.totalBalance0;
            let Token0Value = Token0Balance / 10 ** Token0Decimal;
            let Token1Balance = result.totalBalance1;
            let Token1Value = Token1Balance / 10 ** Token1Decimal;
            let TotalAssetValue = Token1Value * grbPrice + Token0Value * arbPrice;
            $('.total-asset-value').text(TotalAssetValue.toFixed(2));
            let totalMintPerDay = result.totalMintPerDay_;
            let Apr = (((totalMintPerDay / 10 ** Token0Decimal) * 365 * grbPrice) / TotalAssetValue) * 100 ;
            $('.apr').text(Apr.toFixed(2));
            let UserEarnToken = result.userGRBPending_ / 10 ** 18;
            $('.user-earn-token').text(UserEarnToken.toFixed(2));
            let EarnVolume = UserEarnToken * grbPrice;
            $('.earn-volume').text(EarnVolume.toFixed(2));
            if (result.tokenId == 0) { 
                $('.nft-deposited-check').hide();
                $('.status-in-wallet').show();
                GarbiFarmUniV3Contract.methods.getNFTTokensWithPair(userWallet).call()
                .then(function (result) {
                    if (result.length == 0) {
                        $('.nft-quantity-check').hide();
                        $('.user-earn-token').text('0.0');
                        $('.user-token-1-amount').text('0');
                        $('.user-token-0-amount').text('0');
                        $('.volume-liquidity').text('0.0');
                    }
                    if (result.length > 0) {
                        if (result.length > 1) {
                            $('.nft-quantity-check').show();                      
                            let NftQuantity = result.length;
                            $('.nft-quantity').text(NftQuantity);
                        }    
                        userTokenId = result[result.length - 1];
                        GarbiFarmUniV3Contract.methods.getNFTTokenInfo(userTokenId).call()
                        .then (function (result) {
                            let UserToken0Amount = result.token0Amount / 10 ** Token0Decimal;
                            $('.user-token-0-amount').text(UserToken0Amount.toFixed(2));
                            let UserToken1Amount = result.token1Amount / 10 ** Token1Decimal;
                            $('.user-token-1-amount').text(UserToken1Amount.toFixed(2));              
                            let VolumeLiquidity = UserToken1Amount * arbPrice + UserToken0Amount * grbPrice;
                            $('.liquidity-volume').text(VolumeLiquidity.toFixed(2));
                            if (result.inPriceRange == true) {
                                $('.notice-range').hide();
                            }
                            else {
                                $('.notice-range').show();
                            }
                            let dataUrlString = result.tokenURI;
                            let Base64DataUrl = dataUrlString.split(",")[1]
                            let DataUrl = JSON.parse(atob(Base64DataUrl));
                            $('.image-token').attr('src', DataUrl.image);
                            let tickLower = result.tickLower;
                            let tickUpper = result.tickUpper;
                            if (tickLower == -887220) {
                                $('.min-price-nft .price-nft').text('0.0');
                                $('.min-price-nft .value-nft').text('0');
                            }
                            else {
                                let minPrice = calculatePrice(tickLower);
                                let valueMinPrice = minPrice * arbPrice ;
                                $('.min-price-nft .price-nft').text(minPrice.toFixed(6));
                                $('.min-price-nft .value-nft').text(valueMinPrice.toFixed(2));
                            }
                            
                            if (tickUpper == 887220) {
                                $('.max-price-nft .price-nft').text('∞');
                                $('.max-price-nft .value-nft').text('0');
                            }
                            else {
                                let maxPrice = calculatePrice(tickUpper);                           
                                let valueMaxPrice = maxPrice * arbPrice ;                      
                                $('.max-price-nft .price-nft').text(maxPrice.toFixed(6));
                                $('.max-price-nft .value-nft').text(valueMaxPrice.toFixed(2));
                            }                                                                    
                        });
                    }    
                });
            }
            else {
                userTokenId = result.tokenId;
                $('.nft-deposited-check').show();
                $('.status-in-earning').show();
                GarbiFarmUniV3Contract.methods.getNFTTokenInfo(userTokenId).call()
                .then (function (result){
                    let UserToken0Amount = result.token0Amount / 10 ** Token0Decimal;
                    $('.user-token-0-amount').text(UserToken0Amount.toFixed(2));
                    let UserToken1Amount = result.token1Amount / 10 ** Token1Decimal;
                    $('.user-token-1-amount').text(UserToken1Amount.toFixed(2));
                    let VolumeLiquidity = UserToken1Amount * arbPrice + UserToken0Amount * grbPrice;
                    $('.liquidity-volume').text(VolumeLiquidity.toFixed(2));
                    if (result.inPriceRange == true) {
                        $('.notice-range').hide();
                    }
                    else {
                        $('.notice-range').show();
                    }
                    let dataUrlString = result.tokenURI;
                    let Base64DataUrl = dataUrlString.split(",")[1]
                    let DataUrl = JSON.parse(atob(Base64DataUrl));
                    $('.image-token').attr('src', DataUrl.image);
                    let tickLower = result.tickLower;
                    let tickUpper = result.tickUpper;
                    let minPrice = calculatePrice(tickLower);
                    let maxPrice = calculatePrice(tickUpper);
                    let valueMinPrice = minPrice * arbPrice ;
                    let valueMaxPrice = maxPrice * arbPrice ;
                    $('.min-price-nft .price-nft').text(minPrice.toFixed(6));
                    $('.min-price-nft .value-nft').text(valueMinPrice.toFixed(2));
                    $('.max-price-nft .price-nft').text(maxPrice.toFixed(6));
                    $('.max-price-nft .value-nft').text(valueMaxPrice.toFixed(2));
                });
            }

        });
        setInterval(function () {
            let userWallet = coreHelper.getUserAccount();
            GarbiFarmUniV3Contract.methods.getData(userWallet).call()
            .then(function (result) {
                let CurrentPriceData = result.currentPrice;
                let CurrentPrice = convertSqrtPriceX96ToPrice(CurrentPriceData);
                $('.current-grb-price').text(CurrentPrice.toFixed(6));
                $('.current-grb-price-usd').text((CurrentPrice*arbPrice).toFixed(2));
                let Token0Balance = result.totalBalance0;
                let Token0Value = Token0Balance / 10 ** Token0Decimal;
                let Token1Balance = result.totalBalance1;
                let Token1Value = Token1Balance / 10 ** Token1Decimal;
                let TotalAssetValue = Token0Value * grbPrice + Token1Value * arbPrice;
                $('.total-asset-value').text(TotalAssetValue.toFixed(2));
                let totalMintPerDay = result.totalMintPerDay_;
                let Apr = (((totalMintPerDay / 10 ** Token0Decimal) * 365 * grbPrice) / TotalAssetValue) * 100 ;
                $('.apr').text(Apr.toFixed(2));
                let UserEarnToken = result.userGRBPending_ / 10 ** Token0Decimal;
                $('.user-earn-token').text(UserEarnToken.toFixed(2));
                let EarnVolume = UserEarnToken * grbPrice;
                $('.earn-volume').text(EarnVolume.toFixed(2));
                if (result.tokenId == 0) {
                    $('.nft-deposited-check').hide();
                    $('.status-in-wallet').show();
                    $('.status-in-earning').hide();
                    GarbiFarmUniV3Contract.methods.getNFTTokensWithPair(userWallet).call()
                    .then(function (result) {
                        if (result.length == 0) {
                            $('.user-earn-token').text('0.0');
                            $('.user-token-1-amount').text('0');
                            $('.user-token-0-amount').text('0');
                            $('.volume-liquidity').text('0.0');
                        }
                        if (result.length > 0) {
                            userTokenId = result[result.length - 1];
                            GarbiFarmUniV3Contract.methods.getNFTTokenInfo(userTokenId).call()
                            .then (function (result) {
                                let UserToken0Amount = result.token0Amount / 10 ** Token0Decimal;
                                $('.user-token-0-amount').text(UserToken0Amount.toFixed(2));
                                let UserToken1Amount = result.token1Amount / 10 ** Token1Decimal;
                                $('.user-token-1-amount').text(UserToken1Amount.toFixed(2));                         
                                let VolumeLiquidity = UserToken1Amount * arbPrice + UserToken0Amount * grbPrice;
                                $('.liquidity-volume').text(VolumeLiquidity.toFixed(2));
                                if (result.inPriceRange == true) {
                                    $('.notice-range').hide();
                                }
                                else {
                                    $('.notice-range').show();
                                }
                                let dataUrlString = result.tokenURI;
                                let Base64DataUrl = dataUrlString.split(",")[1]
                                let DataUrl = JSON.parse(atob(Base64DataUrl));
                                if($('.image-token').attr('src') !== DataUrl.image) {
                                    $('.image-token').attr('src', DataUrl.image);
                                }
                                let tickLower = result.tickLower;
                                let tickUpper = result.tickUpper;
                                if (tickLower == -887220) {
                                    $('.min-price-nft .price-nft').text('0.0');
                                    $('.min-price-nft .value-nft').text('0');
                                }
                                else {
                                    let minPrice = calculatePrice(tickLower);
                                    let valueMinPrice = minPrice * arbPrice ;
                                    $('.min-price-nft .price-nft').text(minPrice.toFixed(6));
                                    $('.min-price-nft .value-nft').text(valueMinPrice.toFixed(2));
                                }
                                
                                if (tickUpper == 887220) {
                                    $('.max-price-nft .price-nft').text('∞');
                                    $('.max-price-nft .value-nft').text('0');
                                }
                                else {
                                    let maxPrice = calculatePrice(tickUpper);                           
                                    let valueMaxPrice = maxPrice * arbPrice ;                      
                                    $('.max-price-nft .price-nft').text(maxPrice.toFixed(6));
                                    $('.max-price-nft .value-nft').text(valueMaxPrice.toFixed(2));
                                }                                       
                            });
                        } 
                    });
                }
                else {
                    userTokenId = result.tokenId;
                    $('.nft-deposited-check').show();
                    $('.status-in-wallet').hide();
                    $('.status-in-earning').show();
                    GarbiFarmUniV3Contract.methods.getNFTTokenInfo(userTokenId).call()
                    .then (function (result){
                        let UserToken0Amount = result.token0Amount / 10 ** Token0Decimal;
                        $('.user-token-0-amount').text(UserToken0Amount.toFixed(2));
                        let UserToken1Amount = result.token1Amount / 10 ** Token1Decimal;
                        $('.user-token-1-amount').text(UserToken1Amount.toFixed(2));                        
                        let VolumeLiquidity = UserToken1Amount * arbPrice + UserToken0Amount * grbPrice;
                        $('.liquidity-volume').text(VolumeLiquidity.toFixed(2));
                        if (result.inPriceRange == true) {
                            $('.notice-range').hide();
                        }
                        else {
                            $('.notice-range').show();
                        }
                        let dataUrlString = result.tokenURI;
                        let Base64DataUrl = dataUrlString.split(",")[1]
                        let DataUrl = JSON.parse(atob(Base64DataUrl));
                        if($('.image-token').attr('src') !== DataUrl.image) {
                            $('.image-token').attr('src', DataUrl.image);
                        }
                        let tickLower = result.tickLower;
                        let tickUpper = result.tickUpper;
                        let minPrice = calculatePrice(tickLower);
                        let maxPrice = calculatePrice(tickUpper);
                        let valueMinPrice = minPrice * arbPrice ;
                        let valueMaxPrice = maxPrice * arbPrice ;
                        $('.min-price-nft .price-nft').text(minPrice.toFixed(6));
                        $('.min-price-nft .value-nft').text(valueMinPrice.toFixed(2));
                        $('.max-price-nft .price-nft').text(maxPrice.toFixed(6));
                        $('.max-price-nft .value-nft').text(valueMaxPrice.toFixed(2));
                    });
                }
            });
        }, 3000);
        $('.grb-farm-2 .button-deposit-nft').click(function () {                                                 
            $('#token-increase').modal('show');
        });
        $('#token-increase .btn-approve').click(function () {
            let userWallet = coreHelper.getUserAccount();
            let NonfungiblePositionManagerContract = contractBaseHelper.getMainContract(configHelper.getContractAddressByName(chainId, 'NonfungiblePositionManager'), NonfungiblePositionManagerABI);
            NonfungiblePositionManagerContract.methods
            .approve(
                configHelper.getContractAddressByName(chainId, 'GarbiFarmUniV3ForARB')
                , userTokenId)
            .send({
                from: userWallet
            })
            .on('transactionHash', (hash) => {
                coreHelper.showPopup('confirm-popup');
                $('.transaction-hash').attr("href", "https://arbiscan.io/tx/" + hash);
            })
            .on('confirmation', (confirmationNumber, receipt) => {
                $('#token-increase .btn-approve').hide();
                coreHelper.hidePopup('confirm-popup', 0);
                coreHelper.showPopup('success-confirm-popup');
                coreHelper.hidePopup('success-confirm-popup', 10000);
            })
            .on('receipt', (receipt) => {
                $('#token-increase .btn-approve').hide();
                coreHelper.hidePopup('confirm-popup', 0);
                coreHelper.showPopup('success-confirm-popup');
                coreHelper.hidePopup('success-confirm-popup', 10000);
            })
            .on('error', (err, receipt) => {
                console.log(err);
            });
        });
        $('#token-increase .btn-deposit').click(function () {
            let userWallet = coreHelper.getUserAccount();
            NonfungiblePositionManagerContract.methods.getApproved(userTokenId).call().then(function (result) {
                if (result.toLowerCase() == configHelper.getContractAddressByName(chainId, 'GarbiFarmUniV3ForARB').toLowerCase()) {
                    let GarbiFarmUniV3Contract = contractBaseHelper.getMainContract(configHelper.getContractAddressByName(chainId, 'GarbiFarmUniV3ForARB'), GarbiFarmUniV3ABI);
                    GarbiFarmUniV3Contract.methods
                    .deposit(userTokenId)
                    .send({
                        from: userWallet
                    })
                    .on('transactionHash', (hash) => {
                        coreHelper.showPopup('confirm-popup');
                        $('.transaction-hash').attr("href", "https://arbiscan.io/tx/" + hash);
                    })
                    .on('confirmation', (confirmationNumber, receipt) => {
                        $('#token-increase').modal('hide');                     
                        coreHelper.hidePopup('confirm-popup', 0);
                        coreHelper.showPopup('success-confirm-popup');
                        coreHelper.hidePopup('success-confirm-popup', 10000);
                    })
                    .on('receipt', (receipt) => {
                        $('#token-increase').modal('hide');
                        coreHelper.hidePopup('confirm-popup', 0);
                        coreHelper.showPopup('success-confirm-popup');
                        coreHelper.hidePopup('success-confirm-popup', 10000);
                    })
                    .on('error', (err, receipt) => {
                        console.log(err);
                    });
                }
                else {
                    $('#token-increase .btn-approve').show();      
                }
            });
        });   
        $('.button-withdraw').click(function () {
            let userWallet = coreHelper.getUserAccount();
            let GarbiFarmUniV3Contract = contractBaseHelper.getMainContract(configHelper.getContractAddressByName(chainId, 'GarbiFarmUniV3ForARB'), GarbiFarmUniV3ABI);
            GarbiFarmUniV3Contract.methods.withdraw()
            .send({
                from: userWallet
            })
            .on('transactionHash', (hash) => {
                coreHelper.showPopup('confirm-popup');
                $('.transaction-hash').attr("href", "https://arbiscan.io/tx/" + hash);
            })
            .on('confirmation', (confirmationNumber, receipt) => {
                $('.nft-deposited-check').hide();
                coreHelper.hidePopup('confirm-popup', 0);
                coreHelper.showPopup('success-confirm-popup');
                coreHelper.hidePopup('success-confirm-popup', 10000);
            })
            .on('receipt', (receipt) => {
                $('.nft-deposited-check').hide();
                coreHelper.hidePopup('confirm-popup', 0);
                coreHelper.showPopup('success-confirm-popup');
                coreHelper.hidePopup('success-confirm-popup', 10000);
            })
            .on('error', (err, receipt) => {
                console.log(err);
            });           
        });  
        $('.harvest-button').click(function () {
            let userWallet = coreHelper.getUserAccount();
            let GarbiFarmUniV3Contract = contractBaseHelper.getMainContract(configHelper.getContractAddressByName(chainId, 'GarbiFarmUniV3ForARB'), GarbiFarmUniV3ABI);
            GarbiFarmUniV3Contract.methods
            .harvest(userWallet)
            .send({
                from: userWallet
            })
            .on('transactionHash', (hash) => {
                coreHelper.showPopup('confirm-popup');
                $('.transaction-hash').attr("href", "https://arbiscan.io/tx/" + hash);
            })
            .on('confirmation', (confirmationNumber, receipt) => {
                coreHelper.hidePopup('confirm-popup', 0);
                coreHelper.showPopup('success-confirm-popup');
                coreHelper.hidePopup('success-confirm-popup', 10000);
            })
            .on('receipt', (receipt) => {
                coreHelper.hidePopup('confirm-popup', 0);
                coreHelper.showPopup('success-confirm-popup');
                coreHelper.hidePopup('success-confirm-popup', 10000);
            })
            .on('error', (err, receipt) => {
                console.log(err);
            });
        });
    });
</script>

</html>